import Image from "next/image";
import { FC, useEffect, useState } from "react";
import ImageDemoPlaceholder from "./placeholders/image-demo-placeholder.webp";

interface IQRCodeDemoImageProps {
  fileUploadImage: File[];
}

export const QRCodeDemoImage: FC<IQRCodeDemoImageProps> = ({
  fileUploadImage,
}) => {
  const image = fileUploadImage?.[0];
  const [imageUrl, setImageUrl] = useState<string | null>(null);

  useEffect(() => {
    if (image) {
      const url = URL.createObjectURL(image);
      setImageUrl(url);
      return () => URL.revokeObjectURL(url);
    } else {
      setImageUrl(null);
    }
  }, [image]);

  return (
    <svg
      width="270"
      height="352"
      viewBox="0 0 270 352"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      xmlnsXlink="http://www.w3.org/1999/xlink"
    >
      <path
        d="M0 22C0 9.84974 9.84974 0 22 0H248C260.15 0 270 9.84974 270 22V352H0V22Z"
        fill="white"
      />
      <path
        d="M0 21.9718C0 9.83713 9.83712 0 21.9718 0H248.028C260.163 0 270 9.83712 270 21.9718V207H0V21.9718Z"
        fill="#004766"
      />
      <path
        d="M51.1587 41V29.3636H55.5223C56.4162 29.3636 57.1662 29.5303 57.7723 29.8636C58.3822 30.197 58.8424 30.6553 59.153 31.2386C59.4674 31.8182 59.6246 32.4773 59.6246 33.2159C59.6246 33.9621 59.4674 34.625 59.153 35.2045C58.8386 35.7841 58.3746 36.2405 57.7609 36.5739C57.1473 36.9034 56.3916 37.0682 55.4939 37.0682H52.6018V35.3352H55.2098C55.7325 35.3352 56.1606 35.2443 56.4939 35.0625C56.8272 34.8807 57.0734 34.6307 57.2325 34.3125C57.3954 33.9943 57.4769 33.6288 57.4769 33.2159C57.4769 32.803 57.3954 32.4394 57.2325 32.125C57.0734 31.8106 56.8253 31.5663 56.4882 31.392C56.1549 31.214 55.725 31.125 55.1984 31.125H53.2666V41H51.1587ZM63.7415 29.3636V41H61.6846V29.3636H63.7415ZM68.6879 41.1761C68.1348 41.1761 67.6367 41.0777 67.1936 40.8807C66.7542 40.6799 66.4057 40.3845 66.1481 39.9943C65.8943 39.6042 65.7674 39.1231 65.7674 38.5511C65.7674 38.0587 65.8583 37.6515 66.0401 37.3295C66.222 37.0076 66.4701 36.75 66.7845 36.5568C67.0989 36.3636 67.453 36.2178 67.847 36.1193C68.2447 36.017 68.6557 35.9432 69.0799 35.8977C69.5913 35.8447 70.0061 35.7973 70.3242 35.7557C70.6424 35.7102 70.8735 35.642 71.0174 35.5511C71.1651 35.4564 71.239 35.3106 71.239 35.1136V35.0795C71.239 34.6515 71.1121 34.3201 70.8583 34.0852C70.6045 33.8504 70.239 33.733 69.7617 33.733C69.2579 33.733 68.8583 33.8428 68.5629 34.0625C68.2712 34.2822 68.0742 34.5417 67.972 34.8409L66.0515 34.5682C66.203 34.0379 66.453 33.5947 66.8015 33.2386C67.15 32.8788 67.5761 32.6098 68.0799 32.4318C68.5837 32.25 69.1405 32.1591 69.7504 32.1591C70.1708 32.1591 70.5894 32.2083 71.0061 32.3068C71.4227 32.4053 71.8034 32.5682 72.1481 32.7955C72.4928 33.0189 72.7693 33.3239 72.9776 33.7102C73.1898 34.0966 73.2958 34.5795 73.2958 35.1591V41H71.3186V39.8011H71.2504C71.1254 40.0436 70.9492 40.2708 70.722 40.483C70.4985 40.6913 70.2163 40.8598 69.8754 40.9886C69.5383 41.1136 69.1424 41.1761 68.6879 41.1761ZM69.222 39.6648C69.6348 39.6648 69.9928 39.5833 70.2958 39.4205C70.5989 39.2538 70.8318 39.0341 70.9947 38.7614C71.1614 38.4886 71.2447 38.1913 71.2447 37.8693V36.8409C71.1803 36.8939 71.0704 36.9432 70.9151 36.9886C70.7636 37.0341 70.5932 37.0739 70.4038 37.108C70.2144 37.142 70.0269 37.1723 69.8413 37.1989C69.6557 37.2254 69.4947 37.2481 69.3583 37.267C69.0515 37.3087 68.7769 37.3769 68.5345 37.4716C68.292 37.5663 68.1008 37.6989 67.9606 37.8693C67.8204 38.036 67.7504 38.2519 67.7504 38.517C67.7504 38.8958 67.8886 39.1818 68.1651 39.375C68.4417 39.5682 68.7939 39.6648 69.222 39.6648ZM79.4908 41.1705C78.6196 41.1705 77.8715 40.9792 77.2465 40.5966C76.6253 40.214 76.1461 39.6856 75.809 39.0114C75.4757 38.3333 75.309 37.553 75.309 36.6705C75.309 35.7841 75.4795 35.0019 75.8204 34.3239C76.1613 33.642 76.6423 33.1117 77.2636 32.733C77.8886 32.3504 78.6272 32.1591 79.4795 32.1591C80.1878 32.1591 80.8147 32.2898 81.3601 32.5511C81.9094 32.8087 82.3469 33.1742 82.6726 33.6477C82.9984 34.1174 83.184 34.6667 83.2295 35.2955H81.2636C81.184 34.875 80.9946 34.5246 80.6954 34.2443C80.3999 33.9602 80.0041 33.8182 79.5079 33.8182C79.0874 33.8182 78.7181 33.9318 78.3999 34.1591C78.0817 34.3826 77.8336 34.7045 77.6556 35.125C77.4814 35.5455 77.3942 36.0492 77.3942 36.6364C77.3942 37.2311 77.4814 37.7424 77.6556 38.1705C77.8298 38.5947 78.0742 38.9223 78.3886 39.1534C78.7067 39.3807 79.0798 39.4943 79.5079 39.4943C79.8109 39.4943 80.0817 39.4375 80.3204 39.3239C80.5628 39.2064 80.7654 39.0379 80.9283 38.8182C81.0912 38.5985 81.2029 38.3314 81.2636 38.017H83.2295C83.1802 38.6345 82.9984 39.1818 82.684 39.6591C82.3696 40.1326 81.9416 40.5038 81.3999 40.7727C80.8583 41.0379 80.2219 41.1705 79.4908 41.1705ZM89.102 41.1705C88.227 41.1705 87.4713 40.9886 86.835 40.625C86.2024 40.2576 85.7157 39.7386 85.3747 39.0682C85.0338 38.3939 84.8634 37.6004 84.8634 36.6875C84.8634 35.7898 85.0338 35.0019 85.3747 34.3239C85.7194 33.642 86.2005 33.1117 86.8179 32.733C87.4354 32.3504 88.1607 32.1591 88.9941 32.1591C89.5319 32.1591 90.0395 32.2462 90.5168 32.4205C90.9979 32.5909 91.4221 32.8561 91.7895 33.2159C92.1607 33.5758 92.4524 34.0341 92.6645 34.5909C92.8766 35.1439 92.9827 35.803 92.9827 36.5682V37.1989H85.8293V35.8125H91.0111C91.0073 35.4186 90.9221 35.0682 90.7554 34.7614C90.5888 34.4508 90.3558 34.2064 90.0566 34.0284C89.7611 33.8504 89.4164 33.7614 89.0225 33.7614C88.602 33.7614 88.2327 33.8636 87.9145 34.0682C87.5963 34.2689 87.3482 34.5341 87.1702 34.8636C86.996 35.1894 86.9069 35.5473 86.9032 35.9375V37.1477C86.9032 37.6553 86.996 38.0909 87.1816 38.4545C87.3672 38.8144 87.6266 39.0909 87.96 39.2841C88.2933 39.4735 88.6835 39.5682 89.1304 39.5682C89.4297 39.5682 89.7005 39.5265 89.9429 39.4432C90.1854 39.3561 90.3956 39.2292 90.5736 39.0625C90.7516 38.8958 90.8861 38.6894 90.977 38.4432L92.8975 38.6591C92.7763 39.1667 92.5452 39.6098 92.2043 39.9886C91.8672 40.3636 91.4354 40.6553 90.9088 40.8636C90.3823 41.0682 89.78 41.1705 89.102 41.1705ZM103.752 32.2727V33.8636H98.5929V32.2727H103.752ZM99.8826 41V31.4489C99.8826 30.8617 100.004 30.3731 100.246 29.983C100.492 29.5928 100.822 29.3011 101.235 29.108C101.648 28.9148 102.106 28.8182 102.61 28.8182C102.966 28.8182 103.282 28.8466 103.559 28.9034C103.835 28.9602 104.04 29.0114 104.172 29.0568L103.763 30.6477C103.676 30.6212 103.566 30.5947 103.434 30.5682C103.301 30.5379 103.153 30.5227 102.991 30.5227C102.608 30.5227 102.337 30.6155 102.178 30.8011C102.023 30.983 101.945 31.2443 101.945 31.5852V41H99.8826ZM109.161 41.1705C108.309 41.1705 107.571 40.983 106.946 40.608C106.321 40.233 105.836 39.7083 105.491 39.0341C105.15 38.3598 104.98 37.572 104.98 36.6705C104.98 35.7689 105.15 34.9792 105.491 34.3011C105.836 33.6231 106.321 33.0966 106.946 32.7216C107.571 32.3466 108.309 32.1591 109.161 32.1591C110.014 32.1591 110.752 32.3466 111.377 32.7216C112.002 33.0966 112.485 33.6231 112.826 34.3011C113.171 34.9792 113.343 35.7689 113.343 36.6705C113.343 37.572 113.171 38.3598 112.826 39.0341C112.485 39.7083 112.002 40.233 111.377 40.608C110.752 40.983 110.014 41.1705 109.161 41.1705ZM109.173 39.5227C109.635 39.5227 110.021 39.3958 110.332 39.142C110.643 38.8845 110.874 38.5398 111.025 38.108C111.18 37.6761 111.258 37.1951 111.258 36.6648C111.258 36.1307 111.18 35.6477 111.025 35.2159C110.874 34.7803 110.643 34.4337 110.332 34.1761C110.021 33.9186 109.635 33.7898 109.173 33.7898C108.699 33.7898 108.305 33.9186 107.991 34.1761C107.68 34.4337 107.447 34.7803 107.292 35.2159C107.141 35.6477 107.065 36.1307 107.065 36.6648C107.065 37.1951 107.141 37.6761 107.292 38.108C107.447 38.5398 107.68 38.8845 107.991 39.142C108.305 39.3958 108.699 39.5227 109.173 39.5227ZM115.409 41V32.2727H117.403V33.7273H117.494C117.653 33.2235 117.926 32.8352 118.312 32.5625C118.703 32.286 119.148 32.1477 119.648 32.1477C119.761 32.1477 119.888 32.1534 120.028 32.1648C120.172 32.1723 120.292 32.1856 120.386 32.2045V34.0966C120.299 34.0663 120.161 34.0398 119.972 34.017C119.786 33.9905 119.606 33.9773 119.432 33.9773C119.057 33.9773 118.72 34.0587 118.42 34.2216C118.125 34.3807 117.892 34.6023 117.722 34.8864C117.551 35.1705 117.466 35.4981 117.466 35.8693V41H115.409ZM125.657 29.3636H128.038L130.884 34.5114H130.998L133.844 29.3636H136.225L131.992 36.6591V41H129.89V36.6591L125.657 29.3636ZM140.129 41.1705C139.277 41.1705 138.538 40.983 137.913 40.608C137.288 40.233 136.803 39.7083 136.458 39.0341C136.118 38.3598 135.947 37.572 135.947 36.6705C135.947 35.7689 136.118 34.9792 136.458 34.3011C136.803 33.6231 137.288 33.0966 137.913 32.7216C138.538 32.3466 139.277 32.1591 140.129 32.1591C140.981 32.1591 141.72 32.3466 142.345 32.7216C142.97 33.0966 143.453 33.6231 143.794 34.3011C144.138 34.9792 144.311 35.7689 144.311 36.6705C144.311 37.572 144.138 38.3598 143.794 39.0341C143.453 39.7083 142.97 40.233 142.345 40.608C141.72 40.983 140.981 41.1705 140.129 41.1705ZM140.14 39.5227C140.602 39.5227 140.989 39.3958 141.299 39.142C141.61 38.8845 141.841 38.5398 141.993 38.108C142.148 37.6761 142.226 37.1951 142.226 36.6648C142.226 36.1307 142.148 35.6477 141.993 35.2159C141.841 34.7803 141.61 34.4337 141.299 34.1761C140.989 33.9186 140.602 33.7898 140.14 33.7898C139.667 33.7898 139.273 33.9186 138.958 34.1761C138.648 34.4337 138.415 34.7803 138.26 35.2159C138.108 35.6477 138.032 36.1307 138.032 36.6648C138.032 37.1951 138.108 37.6761 138.26 38.108C138.415 38.5398 138.648 38.8845 138.958 39.142C139.273 39.3958 139.667 39.5227 140.14 39.5227ZM151.939 37.3295V32.2727H153.996V41H152.002V39.4489H151.911C151.714 39.9375 151.39 40.3371 150.939 40.6477C150.492 40.9583 149.941 41.1136 149.286 41.1136C148.714 41.1136 148.208 40.9867 147.769 40.733C147.333 40.4754 146.992 40.1023 146.746 39.6136C146.5 39.1212 146.377 38.5265 146.377 37.8295V32.2727H148.433V37.5114C148.433 38.0644 148.585 38.5038 148.888 38.8295C149.191 39.1553 149.589 39.3182 150.081 39.3182C150.384 39.3182 150.678 39.2443 150.962 39.0966C151.246 38.9489 151.479 38.7292 151.661 38.4375C151.846 38.142 151.939 37.7727 151.939 37.3295ZM156.431 41V32.2727H158.425V33.7273H158.516C158.675 33.2235 158.948 32.8352 159.334 32.5625C159.724 32.286 160.17 32.1477 160.67 32.1477C160.783 32.1477 160.91 32.1534 161.05 32.1648C161.194 32.1723 161.313 32.1856 161.408 32.2045V34.0966C161.321 34.0663 161.183 34.0398 160.993 34.017C160.808 33.9905 160.628 33.9773 160.454 33.9773C160.079 33.9773 159.741 34.0587 159.442 34.2216C159.147 34.3807 158.914 34.6023 158.743 34.8864C158.573 35.1705 158.488 35.4981 158.488 35.8693V41H156.431ZM169.582 29.3636V41H167.474V29.3636H169.582ZM172.094 41V32.2727H174.06V33.7557H174.162C174.344 33.2557 174.645 32.8655 175.066 32.5852C175.486 32.3011 175.988 32.1591 176.571 32.1591C177.162 32.1591 177.66 32.303 178.066 32.5909C178.475 32.875 178.763 33.2633 178.929 33.7557H179.02C179.213 33.2708 179.539 32.8845 179.997 32.5966C180.46 32.3049 181.007 32.1591 181.639 32.1591C182.443 32.1591 183.098 32.4129 183.605 32.9205C184.113 33.428 184.367 34.1686 184.367 35.142V41H182.304V35.4602C182.304 34.9186 182.16 34.5227 181.872 34.2727C181.585 34.0189 181.232 33.892 180.816 33.892C180.319 33.892 179.931 34.0473 179.651 34.358C179.374 34.6648 179.236 35.0644 179.236 35.5568V41H177.219V35.375C177.219 34.9242 177.083 34.5644 176.81 34.2955C176.541 34.0265 176.189 33.892 175.753 33.892C175.458 33.892 175.189 33.9678 174.946 34.1193C174.704 34.267 174.511 34.4773 174.367 34.75C174.223 35.0189 174.151 35.3333 174.151 35.6932V41H172.094ZM189.285 41.1761C188.732 41.1761 188.234 41.0777 187.79 40.8807C187.351 40.6799 187.003 40.3845 186.745 39.9943C186.491 39.6042 186.364 39.1231 186.364 38.5511C186.364 38.0587 186.455 37.6515 186.637 37.3295C186.819 37.0076 187.067 36.75 187.381 36.5568C187.696 36.3636 188.05 36.2178 188.444 36.1193C188.842 36.017 189.253 35.9432 189.677 35.8977C190.188 35.8447 190.603 35.7973 190.921 35.7557C191.239 35.7102 191.47 35.642 191.614 35.5511C191.762 35.4564 191.836 35.3106 191.836 35.1136V35.0795C191.836 34.6515 191.709 34.3201 191.455 34.0852C191.201 33.8504 190.836 33.733 190.359 33.733C189.855 33.733 189.455 33.8428 189.16 34.0625C188.868 34.2822 188.671 34.5417 188.569 34.8409L186.648 34.5682C186.8 34.0379 187.05 33.5947 187.398 33.2386C187.747 32.8788 188.173 32.6098 188.677 32.4318C189.181 32.25 189.737 32.1591 190.347 32.1591C190.768 32.1591 191.186 32.2083 191.603 32.3068C192.02 32.4053 192.4 32.5682 192.745 32.7955C193.09 33.0189 193.366 33.3239 193.575 33.7102C193.787 34.0966 193.893 34.5795 193.893 35.1591V41H191.915V39.8011H191.847C191.722 40.0436 191.546 40.2708 191.319 40.483C191.095 40.6913 190.813 40.8598 190.472 40.9886C190.135 41.1136 189.739 41.1761 189.285 41.1761ZM189.819 39.6648C190.232 39.6648 190.59 39.5833 190.893 39.4205C191.196 39.2538 191.429 39.0341 191.592 38.7614C191.758 38.4886 191.842 38.1913 191.842 37.8693V36.8409C191.777 36.8939 191.667 36.9432 191.512 36.9886C191.361 37.0341 191.19 37.0739 191.001 37.108C190.811 37.142 190.624 37.1723 190.438 37.1989C190.253 37.2254 190.092 37.2481 189.955 37.267C189.648 37.3087 189.374 37.3769 189.131 37.4716C188.889 37.5663 188.698 37.6989 188.557 37.8693C188.417 38.036 188.347 38.2519 188.347 38.517C188.347 38.8958 188.486 39.1818 188.762 39.375C189.039 39.5682 189.391 39.6648 189.819 39.6648ZM200.076 44.4545C199.338 44.4545 198.703 44.3542 198.173 44.1534C197.643 43.9564 197.216 43.6913 196.895 43.358C196.573 43.0246 196.349 42.6553 196.224 42.25L198.076 41.8011C198.16 41.9716 198.281 42.1402 198.44 42.3068C198.599 42.4773 198.813 42.6174 199.082 42.7273C199.355 42.8409 199.698 42.8977 200.11 42.8977C200.694 42.8977 201.177 42.7557 201.559 42.4716C201.942 42.1913 202.133 41.7292 202.133 41.0852V39.4318H202.031C201.925 39.6439 201.77 39.8617 201.565 40.0852C201.364 40.3087 201.097 40.4962 200.764 40.6477C200.434 40.7992 200.02 40.875 199.52 40.875C198.849 40.875 198.241 40.7178 197.696 40.4034C197.154 40.0852 196.722 39.6117 196.4 38.983C196.082 38.3504 195.923 37.5587 195.923 36.608C195.923 35.6496 196.082 34.8409 196.4 34.1818C196.722 33.5189 197.156 33.017 197.701 32.6761C198.247 32.3314 198.855 32.1591 199.525 32.1591C200.037 32.1591 200.457 32.2462 200.787 32.4205C201.12 32.5909 201.385 32.7973 201.582 33.0398C201.779 33.2784 201.929 33.5038 202.031 33.7159H202.145V32.2727H204.173V41.142C204.173 41.8883 203.995 42.5057 203.639 42.9943C203.283 43.483 202.796 43.8485 202.179 44.0909C201.561 44.3333 200.86 44.4545 200.076 44.4545ZM200.093 39.2614C200.529 39.2614 200.9 39.1553 201.207 38.9432C201.514 38.7311 201.747 38.4261 201.906 38.0284C202.065 37.6307 202.145 37.1534 202.145 36.5966C202.145 36.0473 202.065 35.5663 201.906 35.1534C201.751 34.7405 201.52 34.4205 201.213 34.1932C200.91 33.9621 200.537 33.8466 200.093 33.8466C199.635 33.8466 199.252 33.9659 198.946 34.2045C198.639 34.4432 198.408 34.7708 198.252 35.1875C198.097 35.6004 198.02 36.0701 198.02 36.5966C198.02 37.1307 198.097 37.5985 198.252 38C198.412 38.3977 198.645 38.7083 198.951 38.9318C199.262 39.1515 199.643 39.2614 200.093 39.2614ZM210.465 41.1705C209.59 41.1705 208.834 40.9886 208.197 40.625C207.565 40.2576 207.078 39.7386 206.737 39.0682C206.396 38.3939 206.226 37.6004 206.226 36.6875C206.226 35.7898 206.396 35.0019 206.737 34.3239C207.082 33.642 207.563 33.1117 208.18 32.733C208.798 32.3504 209.523 32.1591 210.357 32.1591C210.894 32.1591 211.402 32.2462 211.879 32.4205C212.36 32.5909 212.785 32.8561 213.152 33.2159C213.523 33.5758 213.815 34.0341 214.027 34.5909C214.239 35.1439 214.345 35.803 214.345 36.5682V37.1989H207.192V35.8125H212.374C212.37 35.4186 212.285 35.0682 212.118 34.7614C211.951 34.4508 211.718 34.2064 211.419 34.0284C211.124 33.8504 210.779 33.7614 210.385 33.7614C209.965 33.7614 209.595 33.8636 209.277 34.0682C208.959 34.2689 208.711 34.5341 208.533 34.8636C208.358 35.1894 208.269 35.5473 208.266 35.9375V37.1477C208.266 37.6553 208.358 38.0909 208.544 38.4545C208.73 38.8144 208.989 39.0909 209.322 39.2841C209.656 39.4735 210.046 39.5682 210.493 39.5682C210.792 39.5682 211.063 39.5265 211.305 39.4432C211.548 39.3561 211.758 39.2292 211.936 39.0625C212.114 38.8958 212.249 38.6894 212.34 38.4432L214.26 38.6591C214.139 39.1667 213.908 39.6098 213.567 39.9886C213.23 40.3636 212.798 40.6553 212.271 40.8636C211.745 41.0682 211.143 41.1705 210.465 41.1705ZM217.672 41.125C217.328 41.125 217.032 41.0038 216.786 40.7614C216.54 40.5189 216.419 40.2235 216.422 39.875C216.419 39.5341 216.54 39.2424 216.786 39C217.032 38.7576 217.328 38.6364 217.672 38.6364C218.006 38.6364 218.295 38.7576 218.542 39C218.792 39.2424 218.919 39.5341 218.922 39.875C218.919 40.1061 218.858 40.3163 218.74 40.5057C218.627 40.6951 218.475 40.8466 218.286 40.9602C218.1 41.0701 217.896 41.125 217.672 41.125ZM217.672 34.8977C217.328 34.8977 217.032 34.7765 216.786 34.5341C216.54 34.2879 216.419 33.9924 216.422 33.6477C216.419 33.3068 216.54 33.0152 216.786 32.7727C217.032 32.5265 217.328 32.4034 217.672 32.4034C218.006 32.4034 218.295 32.5265 218.542 32.7727C218.792 33.0152 218.919 33.3068 218.922 33.6477C218.919 33.875 218.858 34.0833 218.74 34.2727C218.627 34.4621 218.475 34.6136 218.286 34.7273C218.1 34.8409 217.896 34.8977 217.672 34.8977Z"
        fill="white"
      />
      <g>
        <path
          d="M15 75C15 67.268 21.268 61 29 61H241C248.732 61 255 67.268 255 75V352H15V75Z"
          fill="white"
          shapeRendering="crispEdges"
        />
        <foreignObject x="29" y="75" width="212" height="263">
          <Image
            src={imageUrl || ImageDemoPlaceholder}
            alt="QR Code Demo"
            width={270}
            height={352}
            className="object-cover"
            unoptimized={!!imageUrl}
            priority
          />
        </foreignObject>
      </g>
    </svg>
  );
};
